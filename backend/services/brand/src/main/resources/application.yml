spring:
  application:
    name: brand-service

  profiles:
    active: ${PROFILE}
    include: auth

  config:
    import:
      - classpath:application-routes.yml

  datasource:
    url: ${DATABASE_URL}
    username: ${DATABASE_USER}
    password: ${DATABASE_PASSWORD}

  jpa:
    hibernate:
      ddl-auto: validate
    show-sql: false
    properties:
      hibernate:
        dialect: org.hibernate.dialect.PostgreSQLDialect
        format_sql: true

  flyway:
    enabled: true
    locations: classpath:db/migration
    baseline-on-migrate: true
    validate-on-migrate: true

server:
  port: ${PORT:8001}

swagger:
  enabled: ${SWAGGER_ENABLED}
  title: Brand Management System
  server-urls: http://localhost:8001,${BACKEND_SERVER_URL}

api:
  prefix: ${API_PREFIX}
  frontend-url: ${FRONTEND_URL}
  routes:
    brand-env-paths: []

logging:
  level:
    root: INFO

management:
  otlp:
    metrics:
      export:
        enabled: false
  opentelemetry:
    tracing:
      export:
        otlp:
          endpoint: ${CONTAINERAPP_OTEL_TRACING_GRPC_ENDPOINT}
          transport: ${OTEL_EXPORTER_OTLP_PROTOCOL}
    logging:
      export:
        otlp:
          endpoint: ${CONTAINERAPP_OTEL_LOGGING_GRPC_ENDPOINT}
          transport: ${OTEL_EXPORTER_OTLP_PROTOCOL}

deno:
  vm:
    enabled: true
    pool-enabled: true
    pool-size: 2
    worker-concurrency: 4
    timeout-seconds: 30
    pool-max-tasks-per-worker: 1000
    pool-idle-kill-seconds: 0
    pool-janitor-enabled: true
    pool-janitor-interval-seconds: 60
    pool-janitor-file-ttl-seconds: 300
    v8-max-old-space-mb: 32

webhook:
  enabled: ${WEBHOOK_ENABLED}
  connect-timeout-ms: ${WEBHOOK_CONNECT_TIMEOUT_MS:5000}
  read-timeout-ms: ${WEBHOOK_READ_TIMEOUT_MS:30000}
  max-retries: ${WEBHOOK_MAX_RETRIES:3}
  base-delay-seconds: ${WEBHOOK_BASE_DELAY_SECONDS:10}
  max-retry-delay-seconds: ${WEBHOOK_MAX_RETRY_DELAY_SECONDS:3600}
  retry-multiplier: ${WEBHOOK_RETRY_MULTIPLIER:2.0}

email:
  enabled: ${EMAIL_ENABLED}
  sender-address: ${EMAIL_SENDER_ADDRESS}
  connection-string: ${EMAIL_CONNECTION_STRING}
  thread-pool-size: ${EMAIL_THREAD_POOL_SIZE:5}

permission:
  enabled: ${PERMISSION_ENABLED}

app:
  crypto:
    secret-key: ${CRYPTO_SECRET_KEY}

fynxt:
  auth:
    api-prefix: ${API_PREFIX}
    frontend-url: ${FRONTEND_URL}
    admin-token: ${ADMIN_TOKEN}
  jwt:
    enabled: true
    issuer: ${JWT_ISSUER}
    audience: ${JWT_AUDIENCE}
    signing-key-id: ${JWT_SIGNING_KEY_ID}
    refresh-signing-key-id: ${JWT_REFRESH_SIGNING_KEY_ID}
    access-token-expiration: ${JWT_ACCESS_TOKEN_EXPIRATION}
    refresh-token-expiration: ${JWT_REFRESH_TOKEN_EXPIRATION}
  flow:
    enabled: true
    dashboard:
      enabled: true
